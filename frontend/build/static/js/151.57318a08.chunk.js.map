{"version":3,"file":"static/js/151.57318a08.chunk.js","mappings":"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","sources":["pages/AdminPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSetRecoilState } from 'recoil';\r\nimport { isAdminState } from '../atoms/atoms';\r\nimport axiosInstance from '../services/axiosInstance';\r\nimport FileUploader from '../forms/FileUploader';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nconst AdminPage = () => {\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const setIsAdmin = useSetRecoilState(isAdminState);\r\n  const navigate = useNavigate();\r\n\r\n  const handlePasswordChange = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setError('Nová hesla se neshodují');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axiosInstance.post('/api/auth/change-password', {\r\n        currentPassword,\r\n        newPassword\r\n      });\r\n      setSuccess('Heslo bylo úspěšně změněno');\r\n      setCurrentPassword('');\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n    } catch (error: any) {\r\n      setError(error.response?.data?.error || 'Chyba při změně hesla');\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await axiosInstance.post('/api/auth/logout');\r\n      setIsAdmin(false);\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Administrace | Portál občana obce Ořechov</title>\r\n      </Helmet>\r\n      <div className=\"max-w-6xl mx-auto p-6\">\r\n        <div className=\"grid md:grid-cols-2 gap-8\">\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h2 className=\"text-2xl font-bold mb-6\">Nahrát dokument</h2>\r\n            <FileUploader onUploadComplete={() => {}} />\r\n          </div>\r\n          <div className=\"space-y-8\">\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h2 className=\"text-2xl font-bold mb-6\">Změnit heslo</h2>\r\n              <form onSubmit={handlePasswordChange} className=\"space-y-4\">\r\n              <input \r\n                type=\"text\" \r\n                autoComplete=\"username\" \r\n                value=\"admin\"\r\n                aria-hidden=\"true\"\r\n                style={{ display: 'none' }}\r\n                readOnly\r\n              />\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Současné heslo\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={currentPassword}\r\n                    onChange={(e) => setCurrentPassword(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\r\n                    required\r\n                    autoComplete=\"current-password\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Nové heslo\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={newPassword}\r\n                    onChange={(e) => setNewPassword(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\r\n                    required\r\n                    autoComplete=\"new-password\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700\">\r\n                    Potvrdit nové heslo\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={confirmPassword}\r\n                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\r\n                    required\r\n                    autoComplete=\"new-password\"\r\n                  />\r\n                </div>\r\n                {error && (\r\n                  <div className=\"text-red-600 text-sm\">{error}</div>\r\n                )}\r\n                {success && (\r\n                  <div className=\"text-green-600 text-sm\">{success}</div>\r\n                )}\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\r\n                >\r\n                  Změnit heslo\r\n                </button>\r\n              </form>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h2 className=\"text-2xl font-bold mb-6\">Odhlášení</h2>\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\"\r\n              >\r\n                Odhlásit se\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPage;"],"names":["AdminPage","currentPassword","setCurrentPassword","useState","newPassword","setNewPassword","confirmPassword","setConfirmPassword","error","setError","success","setSuccess","setIsAdmin","useSetRecoilState","isAdminState","navigate","useNavigate","_jsxs","_Fragment","children","_jsx","Helmet","className","FileUploader","onUploadComplete","onSubmit","async","e","preventDefault","axiosInstance","post","_error$response","_error$response$data","response","data","type","autoComplete","value","style","display","readOnly","onChange","target","required","onClick","console"],"sourceRoot":""}